---
title: Quickstart
description: Learn how to seed your PostgreSQL database with Greenseed in under 5 minutes.
---

# Quickstart

This guide walks you through seeding a PostgreSQL database with Greenseed from scratch. You'll create a configuration file, prepare data files, and run your first seeding operation.

## Prerequisites

Before starting, make sure you have:

- Greenseed installed (see [Installation](/installation))
- A PostgreSQL database running and accessible
- Database connection string available

## Step 1: Initialize configuration

Create a new Greenseed configuration file using the `init` command:

```bash
greenseed init
```

This creates a `seed.config.json` file in your current directory with a default configuration:

```json seed.config.json
{
  "$schema": "./node_modules/greenseed/dist/schema/configuration_schema.json",
  "seedFileExtensions": [".json"],
  "databaseUrlEnvVar": "DATABASE_URL",
  "onMissingFile": "error",
  "tables": [
    {
      "table": "example_table",
      "schema": "public",
      "primaryKeys": ["id"],
      "source": "./data/example_table.json",
      "updateOnConflict": [],
      "conflictTargetWhere": null
    }
  ]
}
```

<Tip>
The `$schema` property enables autocomplete and validation in editors like VS Code.
</Tip>

## Step 2: Set up environment variables

Create a `.env` file with your PostgreSQL connection string:

```bash .env
DATABASE_URL=postgresql://user:password@localhost:5432/mydb
```

<Note>
Greenseed uses the `dotenv` package to automatically load environment variables from `.env` files.
</Note>

## Step 3: Configure your tables

Edit `seed.config.json` to match your database schema. Here's an example for a users table:

```json seed.config.json
{
  "$schema": "./node_modules/greenseed/dist/schema/configuration_schema.json",
  "seedFileExtensions": [".json"],
  "databaseUrlEnvVar": "DATABASE_URL",
  "onMissingFile": "error",
  "tables": [
    {
      "table": "users",
      "schema": "public",
      "primaryKeys": ["id"],
      "source": "./data/users.json",
      "updateOnConflict": ["name", "email", "updated_at"]
    }
  ]
}
```

<Steps>
  <Step title="Set the table name">
    Change `"table"` to match your database table name
  </Step>
  <Step title="Specify primary keys">
    List all columns that form the primary key in `"primaryKeys"` array
  </Step>
  <Step title="Point to data file">
    Set `"source"` to the path of your JSON data file (relative to config file)
  </Step>
  <Step title="Configure upsert behavior">
    Add columns to `"updateOnConflict"` array to update them when conflicts occur, or use an empty array `[]` for insert-only
  </Step>
</Steps>

## Step 4: Create data files

Create a directory for your data files and add a JSON file:

```bash
mkdir data
```

Create `data/users.json` with an array of objects:

```json data/users.json
[
  {
    "id": 1,
    "name": "Alice Johnson",
    "email": "alice@example.com",
    "created_at": "2024-01-15T10:00:00Z",
    "updated_at": "2024-01-15T10:00:00Z"
  },
  {
    "id": 2,
    "name": "Bob Smith",
    "email": "bob@example.com",
    "created_at": "2024-01-16T14:30:00Z",
    "updated_at": "2024-01-16T14:30:00Z"
  },
  {
    "id": 3,
    "name": "Carol White",
    "email": "carol@example.com",
    "created_at": "2024-01-17T09:15:00Z",
    "updated_at": "2024-01-17T09:15:00Z"
  }
]
```

<Note>
Each JSON file must contain an array at the root level. Extra fields not present in your database table are automatically ignored.
</Note>

## Step 5: Run the seeding command

Execute the `push` command to seed your database:

```bash
greenseed push
```

You'll see output similar to this:

```
ðŸŒ± GreenSeed

â„¹ Using config: seed.config.json
â„¹ Database: DATABASE_URL
âœ“ Database connection established

Seeding Tables

â„¹ Seeding public.users
âœ“ public.users upserted 3 rows

Summary

âœ“ Seeded 1 table
```

<Tip>
Run `greenseed push` multiple times safely. Greenseed uses your primary keys to detect conflicts and either insert new rows or update existing ones based on your `updateOnConflict` configuration.
</Tip>

## Step 6: Verify the results

Connect to your PostgreSQL database and verify the data was inserted:

```sql
SELECT * FROM users;
```

You should see your three users in the table.

## Understanding upsert behavior

Greenseed's power comes from intelligent conflict handling. Let's explore different configurations:

### Insert-only mode

Use an empty array for `updateOnConflict` to skip updates on conflict:

```json
{
  "table": "users",
  "primaryKeys": ["id"],
  "source": "./data/users.json",
  "updateOnConflict": []
}
```

Behavior: Insert new rows, skip existing rows silently.

### Upsert mode

Specify columns to update when conflicts occur:

```json
{
  "table": "users",
  "primaryKeys": ["id"],
  "source": "./data/users.json",
  "updateOnConflict": ["name", "email", "updated_at"]
}
```

Behavior: Insert new rows, update specified columns for existing rows.

<Warning>
Primary key columns cannot be updated. They are automatically excluded from the `updateOnConflict` list.
</Warning>

## Advanced: Partial unique indexes

If your table has a partial unique index with a WHERE clause, use `conflictTargetWhere`:

```json
{
  "table": "users",
  "primaryKeys": ["email"],
  "source": "./data/users.json",
  "updateOnConflict": ["name"],
  "conflictTargetWhere": "is_active = true"
}
```

This generates SQL like:
```sql
INSERT INTO users (email, name, is_active)
VALUES (...)
ON CONFLICT (email) WHERE is_active = true
DO UPDATE SET name = excluded.name;
```

## Seeding multiple tables

Add multiple table configurations to seed several tables in sequence:

```json seed.config.json
{
  "seedFileExtensions": [".json"],
  "databaseUrlEnvVar": "DATABASE_URL",
  "tables": [
    {
      "table": "users",
      "schema": "public",
      "primaryKeys": ["id"],
      "source": "./data/users.json",
      "updateOnConflict": ["name", "email"]
    },
    {
      "table": "posts",
      "schema": "public",
      "primaryKeys": ["id"],
      "source": "./data/posts.json",
      "updateOnConflict": ["title", "content", "user_id"]
    },
    {
      "table": "comments",
      "schema": "public",
      "primaryKeys": ["id"],
      "source": "./data/comments.json",
      "updateOnConflict": []
    }
  ]
}
```

Tables are seeded in the order they appear in the configuration.

## CLI options

Customize the `push` command with these options:

```bash
# Use a custom config file
greenseed push --config seed.prod.config.json

# Override the database environment variable
greenseed push --dbvar TEST_DATABASE_URL
```

<Note>
Short flags are also available: `-c` for `--config` and `-d` for `--dbvar`.
</Note>

## Error handling

Greenseed validates your configuration and provides clear error messages:

- **Missing tables**: Greenseed checks that all configured tables exist before seeding
- **Invalid config**: Schema validation catches configuration errors early
- **Connection failures**: Database connection issues are reported immediately
- **Missing files**: By default, missing data files cause errors (configurable via `onMissingFile`)

## Next steps

Now that you've completed the quickstart, explore more advanced features:

<CardGroup cols={2}>
  <Card title="Configuration reference" icon="gear" href="/configuration/overview">
    Learn about all configuration options and advanced features
  </Card>
  <Card title="CLI reference" icon="terminal" href="/commands/push">
    Explore all available commands and flags
  </Card>
  <Card title="Upsert behavior" icon="merge" href="/guides/upsert-behavior">
    Learn how conflict resolution and upserts work
  </Card>
  <Card title="Examples" icon="code" href="/guides/examples">
    Real-world usage patterns and examples
  </Card>
</CardGroup>
